<?xml version='1.0' encoding='UTF-8'?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns3:queryAnalysis xmlns:ns3="urn:cgm.ru:cgmsoap" xmlns:ns2="http://cgm.ru">
            <?xml version="1.0" encoding="windows-1251"?>
            <ClinicalDocument xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:hl7-org:v3"
                              xsi:schemaLocation="urn:hl7-org:v3 CDA.xsd">
                <typeId extension="POCD_HD000040" root="2.16.840.1.113883.1.3"/>
                <!-- идентификатор мед документа -->
                <id root="2.16.840.1.113883.1.3" extension="orderMisId"/>
                <!-- код для документа type - пустой в нашем случае   -->
                <code/>
                <!-- Title для документа -->
                <title>Заказ лабораторных исследований</title>
                <!-- дата и время создания направления врачом -->
                <effectiveTime value="orderMisDate"/>
                <!-- уровень конфиденциальности документа : Normal -->
                <confidentialityCode code="N" codeSystem="2.16.840.1.113883.5.25"/>
                <!--язык для этого документа -->
                <languageCode code="ru-RU"/>
                <!-- Статус заказа -->
                <versionNumber value="orderStatus"/>
                <!-- Record target - демографические данные пациента -->
                <recordTarget typeCode="RCT">
                    <patientRole classCode="PAT">
                        <id extension="{идентификатор пациента}" root="GUID"/>
                        <addr>{адрес пациента}</addr>
                        <patient classCode="PSN" determinerCode="INSTANCE">
                            <!-- фио пациента -->
                            <name>
                                <given>{Имя пациента}</given>
                                <suffix>{Отчество пациента}</suffix>
                                <family>{Фамилия пациента}</family>
                            </name>
                            <!-- пол пациента -->
                            <administrativeGenderCode code="patientSex"/>
                            <!-- дата рождения пациента -->
                            <birthTime value="YYYYMMDD"/>
                        </patient>
                        <providerOrganization classCode="ORG" determinerCode="INSTANCE">
                            <!-- UUID ЛПУ -->
                            <id root="XXXX-XXXX-XXXX-XXXX-XXXX"/>
                            <!-- Название ЛПУ, которое посылает в ЛИС направление -->
                            <name>orderCustodian</name>
                        </providerOrganization>
                    </patientRole>
                </recordTarget>
                <!-- создатель документа. Обязательный -->
                <author typeCode="AUT">
                    <!-- дата и время создания направления врачом -->
                    <time value="YYYYMMDDHHMM"/>
                    <assignedAuthor classCode="ASSIGNED">
                        <!-- уникальный код назначившего врача, UUID врача -->
                        <id extension="orderDoctorMisId" root="XXXX-XXXX-XXXX-XXXX-XXXX"/>
                        <assignedPerson classCode="PSN" determinerCode="INSTANCE">
                            <!-- ФИО направивишего врача -->
                            <name>
                                <family>orderDoctorFamily</family>
                                <given>orderDoctorName</given>
                                <suffix>orderDoctorPatronum</suffix>
                            </name>
                        </assignedPerson>
                        <representedOrganization>
                            <!-- UUID лпу в котором работает врач-->
                            <id root="XXXX-XXXX-XXXX-XXXX-XXXX"/>
                            <!-- лпу в котором работает врач-->
                            <name>orderCustodian</name>
                        </representedOrganization>
                    </assignedAuthor>
                </author>
                <componentOf>
                    <encompassingEncounter>
                        <!-- Данные о случае госпитализации -->
                        <id root="orderCustodian" extension="patientNumber"/>
                        <!-- Название ЛПУ, которое посылает в ЛИС направление, patientNumber - номер карты пациента -->
                        <code codeSystem="2.16.840.1.113883.5.4"
                              codeSystemName="actCode"
                              code="IMP"
                              displayName="Inpatient encounter"/>
                        <effectiveTime nullFlavor='NI'/>
                        <!-- Обязательный элемент. Дату госпитализации и выписки из стационара не пересылаем -->
                    </encompassingEncounter>
                </componentOf>

                <component>
                    <structuredBody>
                        <!-- информация по биоматериалу -->
                        <component>
                            <entry>
                                <observation classCode="OBS" moodCode="ENT" negationInd="false">
                                    <!-- дата и время забора биоматериала -->
                                    <effectiveTime value="orderProbeDate"/>
                                    <specimen>
                                        <specimenRole>
                                            <!-- штрих-код на контейнере c биоматериалом  -->
                                            <id root="orderBarCode"/>
                                            <specimenPlayingEntity>
                                                <code code="orderBiomaterialCode">  <!-- код  биоматериала  -->
                                                    <translation displayName="orderBiomaterialName"/>
                                                    <!-- название  биоматериала -->
                                                </code>
                                                <!-- Количество/объем биоматериала -->
                                                <quantity value="orderBiomaterialVolume"/>
                                                <!-- UnitBiomaterialCode - Код единицы измерения биоматериала и UnitBiomaterialName - название биоматериала -->
                                                <unit code="UnitBiomaterialCode" codename="UnitBiomaterialName"/>
                                                <!-- orderBiomaterialComment  -->
                                                <text value="orderBiomaterialComment"/>
                                            </specimenPlayingEntity>
                                        </specimenRole>
                                    </specimen>
                                </observation>
                            </entry>
                        </component>
                        <component>
                            <section>
                                <entry>
                                    <observation classCode="OBS" moodCode="RQO" negationInd="false">
                                        <!-- Код отделения   Название отделения  -->
                                        <id root="XXXX-XXXX-XXXX-XXXX-XXXX" extension="1"/>
                                        <code code="orderDepartmentMisId" displayName="orderDepartmentName"/>
                                    </observation>
                                </entry>
                                <entry>
                                    <observation classCode="OBS" moodCode="RQO" negationInd="false">
                                        <!-- Срочность  -->
                                        <id root="XXXX-XXXX-XXXX-XXXX-XXXX" extension="1"/>
                                        <code code="isUrgent" displayName=""/>
                                    </observation>
                                </entry>
                                <entry>
                                    <observation classCode="OBS" moodCode="RQO" negationInd="false">
                                        <!-- Код МКБ10 Название диагноза    -->
                                        <id root="XXXX-XXXX-XXXX-XXXX-XXXX" extension="1"/>
                                        <code code="orderDiagCode" displayName="orderDiagText"/>
                                    </observation>
                                </entry>
                                <entry>
                                    <observation classCode="OBS" moodCode="RQO" negationInd="false">
                                        <!-- Название типа финансирования, код исследования, название исследования    -->
                                        <id root="XXXX-XXXX-XXXX-XXXX-XXXX" extension="1"/>
                                        <id extension="tyepeFinanceName"/>
                                        <code code="diagnosticCode" displayName="diagnosticName"/>
                                    </observation>
                                </entry>
                                <!--таблица индикаторов - может быть несколько строк   -->
                                <entry>
                                    <observation classCode="OBS" moodCode="RQO" negationInd="false">
                                        <id root="XXXX-XXXX-XXXX-XXXX-XXXX" extension="1"/>
                                        <code code="indicatorCode1" displayName="indicatorName1"/>
                                    </observation>
                                </entry>
                                <entry>
                                    <observation classCode="OBS" moodCode="RQO" negationInd="false">
                                        <id root="XXXX-XXXX-XXXX-XXXX-XXXX" extension="1"/>
                                        <code code="indicatorCode2" displayName="indicatorName2"/>
                                    </observation>
                                </entry>
                            </section>
                        </component>
                        <!--  появляется если пациент женщина и беременная  -->
                        <component>
                            <section>
                                <entry>
                                    <observation classCode="OBS" moodCode="EVN">
                                        <code code="">
                                            <!-- Описание  -->
                                            <translation displayName="средний срок беременности, в неделях"/>
                                        </code>
                                        <!-- срок беременности в неделях -->
                                        <value value="orderPregnat" unit="нед"/>
                                    </observation>
                                </entry>
                            </section>
                        </component>
                        <component>
                            <section>
                                <entry>
                                    <observation classCode="OBS" moodCode="EVN">
                                        <code code="">
                                            <!-- комментарий к направлению  -->
                                            <translation displayName="комментарий к направлению"/>
                                        </code>
                                        <value value="orderComment"/>
                                    </observation>
                                </entry>
                            </section>
                        </component>
                        <!-- закрытие  body и document -->
                    </structuredBody>
                </component>
            </ClinicalDocument>
        </ns3:queryAnalysis>
    </S:Body>
</S:Envelope>

