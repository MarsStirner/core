<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>ru.korus.tmis</groupId>
    <artifactId>tmis-core</artifactId>
    <packaging>pom</packaging>
    <version>${version.tmis.core}</version>
    <name>TMIS Root Project</name>



    <modules>
        <module>business-tier</module>
        <module>common</module>
        <module>database</module>
        <module>drugstore-tier</module>
        <module>laboratory-tier</module>
        <module>server</module>
        <module>ws-medipad</module>
        <module>ws-laboratory</module>
        <!--<module>ws-drugstore</module>-->
        <module>referencebook</module>
        <module>ws-finance</module>
        <module>ws-transfusion</module>
        <module>communication</module>
        <module>ws-users-mgr</module>
    </modules>


    <properties>
        <!-- Версия ядра-->
        <version.tmis.core>2.5.5-SNAPSHOT</version.tmis.core>


        <version.joda.time>2.1</version.joda.time>
        <version.apache.thrift>0.9.0</version.apache.thrift>
        <version.testng>6.8</version.testng>
        <version.mokito>1.9.5</version.mokito>
        <version.junit>4.8.2</version.junit>
        <version.logging.logback>1.0.13</version.logging.logback>
        <version.logging.logback.janino>2.6.1</version.logging.logback.janino>
        <version.logging.jcl>1.7.2</version.logging.jcl>
        <version.logging.slf4j>1.7.2</version.logging.slf4j>
        <version.logging.grizzled-slf4j>1.0.1</version.logging.grizzled-slf4j>

        <version.scala>2.10.3</version.scala>
        <version.javax.inject>1</version.javax.inject>
        <version.javaee.api>6.0</version.javaee.api>
        <version.javax.mail>1.4.5</version.javax.mail>
        <version.groovy>2.1.0</version.groovy>
        <version.spock>0.7-groovy-2.0</version.spock>
        <version.gmaven.runtime>1.4</version.gmaven.runtime>
        <version.mysql.connector>5.1.25</version.mysql.connector>
        <version.eclipselink>2.5.0</version.eclipselink>
        <version.eclipse.persistence.jpa>2.5.1</version.eclipse.persistence.jpa>
        <version.findbug.annotation>2.0.1</version.findbug.annotation>
        <version.test.spock>0.7-groovy-2.0</version.test.spock>

        <version.maven.plugin.scala>2.15.2</version.maven.plugin.scala>
        <version.maven.plugin.compiler>2.3.2</version.maven.plugin.compiler>
        <version.maven.plugin.source>2.2.1</version.maven.plugin.source>
        <version.maven.plugin.checkstyle>2.9.1</version.maven.plugin.checkstyle>
        <version.maven.plugin.pmd>2.7.1</version.maven.plugin.pmd>
        <version.maven.plugin.embedded.glassfish>3.1.1</version.maven.plugin.embedded.glassfish>
        <version.maven.plugin.release>2.2.1</version.maven.plugin.release>
        <version.maven.plugin.resources>2.6</version.maven.plugin.resources>
        <version.maven.plugin.ejb>2.3</version.maven.plugin.ejb>
        <version.maven.gmaven.plugin>1.4</version.maven.gmaven.plugin>
        <version.maven.plugin.dependency>2.8</version.maven.plugin.dependency>

        <version.jersey.servlet>com.sun.jersey.spi.container.servlet.ServletContainer</version.jersey.servlet>

        <spring.version>3.2.0.RELEASE</spring.version>

        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <project.build.jdk>1.6</project.build.jdk>

        <!-- Вкл/Выкл отладочную информацию-->
        <project.build.debug>true</project.build.debug>

        <!-- Проверить! Удалить, если не используется-->
        <my.build.directory>target</my.build.directory>

        <!--Нотификация алармов по email-->
        <!-- Хост SMTP сервера -->
        <alarm.smtpHost>smtp.gmail.com</alarm.smtpHost>
        <!-- Адрес email от кого отправлять письмо -->
        <alarm.from>****</alarm.from>
        <!-- Адрес email кому отправлять письмо -->
        <alarm.to>****</alarm.to>
        <!-- Кол-во эксепшенов отправляемых в одном письме -->
        <alarm.count.message>10</alarm.count.message>

        <!-- Путь для логов в тестовом окружжении-->
        <logs.test.path>${project.build.directory}/logs-test/</logs.test.path>
        <!-- Уровень записи лога по умолчанию -->
        <logs.level>INFO</logs.level>
        <!-- Формат записи в лог -->
        <log.format>%5p [%d][%thread][%logger{0}] %msg%n</log.format>

        <!-- Настройки по умолчанию -->
        <separate>/</separate>
        <!-- Домашняя директория Glassfish -->
        <glassfish.home>/usr/local/glassfish3</glassfish.home>
        <!-- Исполняемая директория Glassfish -->
        <glassfish.bin>${glassfish.home}${separate}bin</glassfish.bin>
        <!-- Путь к директории доменов -->
        <glassfish.domain.dir>${glassfish.home}${separate}glassfish${separate}domains</glassfish.domain.dir>
        <!-- Хост сервера Glassfish -->
        <glassfish.host>localhost</glassfish.host>
        <!-- Порт инстанса приложения -->
        <glassfish.port.instance>8080</glassfish.port.instance>
        <!-- Порт админского Web IF -->
        <glassfish.port.admin>4848</glassfish.port.admin>
        <!-- Название домена -->
        <glassfish.domain>domain1</glassfish.domain>
        <!-- Логин администратора -->
        <glassfish.admin.login>admin</glassfish.admin.login>
        <!-- Пароль администратора-->
        <glassfish.admin.password>admin1234</glassfish.admin.password>
        <!-- Мастер пароль -->
        <glassfish.master.password>admin1234</glassfish.master.password>
        <!-- Название приложения, которое будет отображаться в интерфейсе -->
        <glassfish.application.name>${project.build.finalName}</glassfish.application.name>
        <!-- Путь к директории домена, с названием (нужен для того, чтобы валидировался pom.xml) -->
        <!--<com.sun.aas.instanceRoot>${glassfish.domain.dir}${separate}${glassfish.domain}${separate}</com.sun.aas.instanceRoot>-->
        <!-- Название приложения, которое будет отображаться в интерфейсе -->
        <ear.name>tmis-server-${version.tmis.core}</ear.name>
        <!-- Название ресурса JNDI к которому подсоединяется ядро (жестко прописаны в коде, всегда должны быть такими) -->
        <mysql.db.jndi.mis>s11r64</mysql.db.jndi.mis>
        <mysql.db.jndi.rls>rls</mysql.db.jndi.rls>
        <mysql.db.jndi.tmis_core>tmis_core</mysql.db.jndi.tmis_core>
        <mysql.db.jndi.kladr>kladr</mysql.db.jndi.kladr>


        <!-- Адрес базы данных -->
        <mysql.db.host>127.0.0.1</mysql.db.host>
        <!-- Порт подключения к базе данных -->
        <mysql.db.port>3306</mysql.db.port>
        <!-- Логин к базе данных -->
        <mysql.login>root</mysql.login>
        <!-- Пароль к базе данных -->
        <mysql.password>root</mysql.password>
        <!-- Название базы данных МИС -->
        <mysql.db.mis>s11r64</mysql.db.mis>
        <!-- Название пула для базы данных МИС -->
        <mysql.db.mis.pool>s11r64-pool</mysql.db.mis.pool>
        <!-- Название базы данных RLS -->
        <mysql.db.rls>rls</mysql.db.rls>
        <!-- Название пула для базы данных RLS -->
        <mysql.db.rls.pool>rls-pool</mysql.db.rls.pool>
        <!-- Название базы данных для конфигурации ядра  -->
        <mysql.db.tmis_core>tmis_core</mysql.db.tmis_core>
        <!-- Название пула для базы данных - конфигурации ядра -->
        <mysql.db.tmis_core.pool>tmis_core-pool</mysql.db.tmis_core.pool>


        <!-- Настройки persistence.xml по умолчанию -->
        <eclipselink.logging.level>WARNING</eclipselink.logging.level>
        <eclipselink.logging.sql.level>OFF</eclipselink.logging.sql.level>
        <eclipselink.logging.parameters>false</eclipselink.logging.parameters>
        <eclipselink.logging.showsql>false</eclipselink.logging.showsql>
        <!-- Схема работы при запуске приложения-->
        <eclipselink.ddl.generated>update-tables</eclipselink.ddl.generated>

    </properties>

    <profiles>
        <profile>
            <id>debug-info</id>
            <properties>
                <project.build.debug>true</project.build.debug>
            </properties>
        </profile>

        <!-- Профиль для установки на стандартный Linux-сервер -->
        <profile>
            <id>production-standart</id>
            <properties>
                <!-- Выключить дебаг -->
                <project.build.debug>false</project.build.debug>
                <!-- Название домена -->
                <glassfish.domain>fccho-moscow</glassfish.domain>
            </properties>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
        </profile>

        <!-- Профиль для установки на стандартный Linux-сервер -->
        <profile>
            <id>fnkc-10.128.225.66-8080-bak</id>
            <properties>
                <!-- Выключить дебаг -->
                <project.build.debug>true</project.build.debug>
                <glassfish.host>localhost</glassfish.host>
                <glassfish.home>/opt/glassfish3</glassfish.home>
                <glassfish.domain>bak</glassfish.domain>

                <mysql.db.mis>hospital</mysql.db.mis>
                <mysql.db.mis.pool>hospital-pool</mysql.db.mis.pool>
            </properties>
        </profile>

        <!-- Профиль для установки на стандартный Linux-сервер -->
        <profile>
            <id>fnkc-10.128.225.66-8081-pharmacy</id>
            <properties>
                <!-- Выключить дебаг -->
                <project.build.debug>true</project.build.debug>
                <glassfish.host>localhost</glassfish.host>
                <glassfish.home>/opt/glassfish3</glassfish.home>
                <glassfish.domain>pharmacy</glassfish.domain>

                <mysql.db.mis>s11r64</mysql.db.mis>
                <mysql.db.mis.pool>s11r64-pool</mysql.db.mis.pool>

                <glassfish.port.instance>8081</glassfish.port.instance>
                <!-- Порт админского Web IF -->
                <glassfish.port.admin>4849</glassfish.port.admin>
            </properties>
        </profile>


        <!-- Профиль для установки на клауд для Алтея -->
        <profile>
            <id>production-altey</id>
            <properties>
                <separate>\</separate>
                <!-- Название домена -->
                <glassfish.domain>mis</glassfish.domain>
                <!-- Название базы данных МИС -->
                <mysql.db.mis>hospital</mysql.db.mis>
                <!-- Выключить дебаг -->
                <project.build.debug>false</project.build.debug>
            </properties>
        </profile>

        <!-- Профиль для Пензы -->
        <profile>
            <id>production-penza</id>
            <properties>
                <!-- Выключить дебаг -->
                <project.build.debug>false</project.build.debug>

                <separate>\</separate>
                <!-- Путь к директории доменов -->
                <glassfish.domain.dir>C:\Winprog\glassfish3\glassfish\domains</glassfish.domain.dir>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>C:\Winprog\glassfish3\</glassfish.home>
                <!-- Название домена -->
                <glassfish.domain>mis</glassfish.domain>
                <!-- Путь к директории домена (нужен для того, чтобы валидировался pom.xml -->
                <!--<com.sun.aas.instanceRoot>${glassfish.domain.dir}\${glassfish.domain}/</com.sun.aas.instanceRoot>-->

                <!-- Логин к базе данных -->
                <mysql.login>tmis</mysql.login>
                <!-- Пароль к базе данных -->
                <mysql.password>321</mysql.password>
                <!-- Название базы данных МИС -->
                <mysql.db.mis>pnz_burdenko_ntk</mysql.db.mis>
                <!-- Выключить дебаг -->
                <project.build.debug>false</project.build.debug>
            </properties>
        </profile>

        <profile>
            <!-- Профиль для интеграционных тестов -->
            <id>intergarion-tests</id>
            <modules>
                <module>integration-tests</module>
            </modules>
            <properties>
                <!-- Имя ear, которое будет после package -->
                <ear.name>tmis-server-${version.tmis.core}</ear.name>
                <!-- Опиция для автосоздания таблиц/ключей на основе содержимого JPA-сущностей -->
                <eclipselink.ddl.generated>NONE</eclipselink.ddl.generated>
            </properties>
        </profile>

        <!-- Профиль для MacMini -->
        <profile>
            <id>macmini</id>
            <properties>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>/usr/local/opt/glassfish/libexec/glassfish/domains/domain1</glassfish.home>
                <!-- Логин к базе данных -->
                <mysql.login>tmis</mysql.login>
                <!-- Пароль к базе данных -->
                <mysql.password>q1w2e3r4t5</mysql.password>
                <!-- Название базы данных МИС -->
                <mysql.db.mis>pnz_gor1</mysql.db.mis>
                <!-- Порт админского Web IF -->
                <glassfish.port.admin>4848</glassfish.port.admin>
                <!-- Название домена -->
                <glassfish.domain>domain1</glassfish.domain>
                <!-- Логин администратора -->
                <glassfish.admin.login>admin</glassfish.admin.login>
                <!-- Пароль администратора-->
                <glassfish.admin.password>admin1234</glassfish.admin.password>
                <!-- Мастер пароль -->
                <glassfish.master.password>admin1234</glassfish.master.password>
                <!-- Схема работы при запуске приложения-->
                <eclipselink.ddl.generated>NONE</eclipselink.ddl.generated>
            </properties>
        </profile>

        <!-- Пользовательский профиль nde-mac -->
        <profile>
            <id>nde-mac-glassfish4</id>
            <properties>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>/usr/local/opt/glassfish/libexec</glassfish.home>


                <glassfish.master.password>changeit</glassfish.master.password>

                <version.jersey.servlet>org.glassfish.jersey.servlet.ServletContainer</version.jersey.servlet>

                <project.build.jdk>1.7</project.build.jdk>
                <version.javaee.api>7.0</version.javaee.api>
            </properties>
        </profile>

        <!-- Пользовательский профиль nde-mac -->
        <profile>
            <id>nde-mac-glassfish3</id>
            <properties>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>/Users/nde/Unixprog/glassfish3</glassfish.home>
                <!--<eclipselink.ddl.generated>update-tables</eclipselink.ddl.generated>-->

            </properties>
        </profile>

        <!-- Пользовательский профиль nde-macmini -->
        <profile>
            <id>nde-macmini</id>
            <properties>
                <!-- Домашняя директория Glassfish: /Users/nde/Unixprog/glassfish3/ -->
                <glassfish.home>/Users/nde/Unixprog/glassfish3</glassfish.home>
            </properties>
        </profile>

        <profile>
            <!-- Пользовательский профиль -->
            <id>nde-win</id>
            <properties>
                <separate>\</separate>
                <!-- Путь к директории доменов -->
                <glassfish.domain.dir>C:\Winprog\glassfish3\glassfish\domains</glassfish.domain.dir>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>C:\Winprog\glassfish3\</glassfish.home>

                <glassfish.bin>C:\Winprog\glassfish3\bin\</glassfish.bin>
                <!-- Название домена -->
                <glassfish.domain>fccho</glassfish.domain>
                <!-- Путь к директории домена (нужен для того, чтобы валидировался pom.xml -->
                <!--<com.sun.aas.instanceRoot>${glassfish.domain.dir}\${glassfish.domain}\</com.sun.aas.instanceRoot>-->
            </properties>
        </profile>

        <profile>
            <id>nde-win-glassfish4</id>
            <properties>
                <separate>\</separate>
                <!-- Путь к директории доменов -->
                <glassfish.domain.dir>C:\Winprog\glassfish4\glassfish\domains</glassfish.domain.dir>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>C:\Winprog\glassfish4\</glassfish.home>

                <glassfish.bin>C:\Winprog\glassfish4\bin\</glassfish.bin>

                <glassfish.master.password>changeit</glassfish.master.password>

                <project.build.jdk>1.7</project.build.jdk>
                <version.javaee.api>7.0</version.javaee.api>
            </properties>
        </profile>

        <!-- Пользовательский профиль -->
        <profile>
            <id>nde-lin</id>
            <properties>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>/opt/glassfish3/</glassfish.home>
            </properties>
        </profile>

        <profile>
            <id>anosov</id>
            <properties>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>/opt/glassfish3/</glassfish.home>
                <!-- Название базы данных МИС -->
                <mysql.db.mis>hospital</mysql.db.mis>
            </properties>
        </profile>

        <profile>
            <id>anosov-win</id>
            <properties>
                <separate>\</separate>
                <!-- Путь к директории доменов -->
                <glassfish.domain.dir>C:\glassfish3\glassfish\domains</glassfish.domain.dir>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>C:\glassfish3\</glassfish.home>

                <glassfish.bin>C:\glassfish3\bin\</glassfish.bin>

                <!-- Название базы данных МИС -->
                <mysql.db.mis>hospital</mysql.db.mis>
            </properties>
        </profile>

        <profile>
            <id>anosov-unix-risar</id>
            <properties>
                <glassfish.home>/opt/glassfish3/</glassfish.home>
                <!-- Название базы данных МИС -->
                <mysql.db.mis>hospital</mysql.db.mis>
            </properties>
        </profile>


        <profile>
            <id>anosov-fnkc66</id>
            <properties>
                <glassfish.home>/opt/glassfish3/</glassfish.home>
            </properties>
        </profile>

        <profile>
            <!-- Пользовательский профиль -->
            <id>sg-win</id>
            <properties>
                <separate>\</separate>
                <!-- Домашняя директория Glassfish -->
                <glassfish.home>C:\Winprog\glassfish3\</glassfish.home>
                <!-- Название домена -->
                <glassfish.domain>fccho</glassfish.domain>
                <!-- Логин администратора -->
                <glassfish.admin.login>admin1234</glassfish.admin.login>
                <glassfish.admin.password>admin1234</glassfish.admin.password>
            </properties>
        </profile>

        <profile>
            <!-- Пользовательский профиль -->
            <id>ueg</id>
            <properties>
                <separate>\</separate>
                <glassfish.home>C:\Winprog\glassfish3</glassfish.home>
                <!-- Название домена -->
                <glassfish.domain>domain</glassfish.domain>
                <!-- Логин администратора -->
                <glassfish.admin.login>admin1234</glassfish.admin.login>
                <!-- Пароль администратора-->
                <glassfish.admin.password>admin1234</glassfish.admin.password>
                <!-- Опиция для автосоздания таблиц/ключей на основе содержимого JPA-сущностей -->
                <eclipselink.ddl.generated>NONE</eclipselink.ddl.generated>
            </properties>
        </profile>
    </profiles>

    <dependencies>
        <!-- Spring framework ${spring.version} -->
        <!--<dependency>-->
        <!--<groupId>org.springframework</groupId>-->
        <!--<artifactId>spring-context</artifactId>-->
        <!--<version>3.2.3.RELEASE</version>-->
        <!--</dependency>-->

        <!--
            Java EE
        -->
        <dependency>
            <groupId>javax.mail</groupId>
            <artifactId>mail</artifactId>
            <version>${version.javax.mail}</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>${version.javaee.api}</version>
            <scope>provided</scope>
        </dependency>

        <!--
            Scala
        -->
        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-library</artifactId>
            <version>${version.scala}</version>
        </dependency>

        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-compiler</artifactId>
            <version>${version.scala}</version>
        </dependency>

        <dependency>
            <groupId>org.scala-lang</groupId>
            <artifactId>scala-actors</artifactId>
            <version>${version.scala}</version>
        </dependency>

        <!--
            Groovy
        -->
        <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-all</artifactId>
            <version>${version.groovy}</version>
        </dependency>

        <dependency>
            <groupId>org.spockframework</groupId>
            <artifactId>spock-core</artifactId>
            <version>${version.test.spock}</version>
            <scope>test</scope>
        </dependency>

        <!--
            Logging
        -->
        <dependency>
            <groupId>org.clapper</groupId>
            <artifactId>grizzled-slf4j_2.10</artifactId>
            <version>${version.logging.grizzled-slf4j}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${version.logging.slf4j}</version>
        </dependency>

        <dependency>
            <groupId>ch.qos.logback</groupId>
            <artifactId>logback-classic</artifactId>
            <version>${version.logging.logback}</version>
        </dependency>

        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${version.logging.jcl}</version>
        </dependency>

        <!-- The org.codehaus.janino:commons-compiler:2.6.1 dependency -->
        <!-- will be automatically pulled in by Maven's transitivity rules -->
        <!--<dependency>-->
        <!--<groupId>org.codehaus.janino</groupId>-->
        <!--<artifactId>janino</artifactId>-->
        <!--<version>${version.logging.logback.janino}</version>-->
        <!--</dependency>-->

        <!--
            JUnit
        -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${version.junit}</version>
        </dependency>

        <dependency>
            <groupId>org.testng</groupId>
            <artifactId>testng</artifactId>
            <version>${version.testng}</version>
            <scope>test</scope>
            <!--<classifier>jdk15</classifier>-->
        </dependency>

        <!--
        Mockito JUnit
        -->
        <dependency>
            <groupId>org.mockito</groupId>
            <artifactId>mockito-all</artifactId>
            <version>1.8.5</version>
        </dependency>

        <!--
            Javax inject
        -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>${version.javax.inject}</version>
        </dependency>

        <!--
        Apache Thrift
        -->
        <dependency>
            <groupId>org.apache.thrift</groupId>
            <artifactId>libthrift</artifactId>
            <version>${version.apache.thrift}</version>
        </dependency>

        <!-- Jersey server for WebMis-->
        <!--<dependency>-->
        <!--<groupId>com.sun.jersey</groupId>-->
        <!--<artifactId>jersey-server</artifactId>-->
        <!--<version>1.16</version>-->
        <!--<scope>test</scope>-->
        <!--</dependency>-->

        <!--
        Joda Time
        -->
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>${version.joda.time}</version>
        </dependency>

        <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>org.eclipse.persistence.jpa</artifactId>
            <version>${version.eclipse.persistence.jpa}</version>
            <scope>provided</scope>
        </dependency>

        <!-- Поддержка findbugs -->
        <dependency>
            <groupId>com.google.code.findbugs</groupId>
            <artifactId>annotations</artifactId>
            <version>${version.findbug.annotation}</version>
        </dependency>



        <!--<dependency>-->
            <!--<groupId>org.glassfish.jersey.containers</groupId>-->
            <!--<artifactId>jersey-container-servlet</artifactId>-->
            <!--<version>2.4</version>-->
            <!--<scope>provided</scope>-->
        <!--</dependency>-->

        <!-- if you are using Jersey client specific features -->
        <!--<dependency>-->
            <!--<groupId>org.glassfish.jersey.core</groupId>-->
            <!--<artifactId>jersey-client</artifactId>-->
            <!--<version>2.4</version>-->
        <!--</dependency>-->

        <!--<dependency>-->
            <!--<groupId>org.glassfish.jersey.core</groupId>-->
            <!--<artifactId>jersey-common</artifactId>-->
            <!--<version>2.4</version>-->
        <!--</dependency>-->

        <!--<dependency>-->
            <!--<groupId>javax.xml.bind</groupId>-->
            <!--<artifactId>jaxb-api</artifactId>-->
            <!--<version>2.2.7</version>-->
        <!--</dependency>-->

        <!--<dependency>-->
            <!--<groupId>com.sun.xml.bind</groupId>-->
            <!--<artifactId>jaxb-impl</artifactId>-->
            <!--<version>2.2.7</version>-->
        <!--</dependency>-->

        <!--<dependency>-->
            <!--<groupId>org.glassfish.metro</groupId>-->
            <!--<artifactId>webservices-rt</artifactId>-->
            <!--<version>2.1</version>-->
        <!--</dependency>-->

    </dependencies>

    <build>
        <defaultGoal>package</defaultGoal>
        <directory>${my.build.directory}</directory>
        <!-- Ресурсы для рабочих исходников-->
        <resources>
            <resource>
                <directory>src/main/resources/</directory>
                <filtering>true</filtering>
                <includes>
                    <include>**/*.*</include>
                </includes>
            </resource>

        </resources>

        <!-- Ресурсы для тестового окружения -->
        <testResources>
            <testResource>
                <directory>src/test/resources/</directory>
                <filtering>true</filtering>
                <includes>
                    <include>**/*.*</include>
                </includes>
            </testResource>
            <testResource>
                <directory>src/test/groovy</directory>
            </testResource>
        </testResources>

        <plugins>
            <!--
                Compiling support
            -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>${version.maven.plugin.compiler}</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <source>${project.build.jdk}</source>
                    <target>${project.build.jdk}</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                    <debug>${project.build.debug}</debug>
                    <showDeprecation>true</showDeprecation>
                    <showWarnings>true</showWarnings>
                    <fork>true</fork>
                    <meminitial>128m</meminitial>
                    <maxmem>768m</maxmem>
                </configuration>
            </plugin>

            <!--
               Scala
            -->
            <plugin>
                <groupId>org.scala-tools</groupId>
                <artifactId>maven-scala-plugin</artifactId>
                <version>${version.maven.plugin.scala}</version>
                <executions>
                    <execution>
                        <id>scala-compile-first</id>
                        <phase>process-resources</phase>
                        <goals>
                            <goal>add-source</goal>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                    <execution>
                        <id>scala-test-compile</id>
                        <phase>process-test-resources</phase>
                        <goals>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <sourceDir>src/main/scala</sourceDir>
                    <jvmArgs>
                        <jvmArg>-Xms512m</jvmArg>
                        <jvmArg>-Xmx1024m</jvmArg>
                    </jvmArgs>
                    <scalaVersion>${version.scala}</scalaVersion>
                </configuration>
            </plugin>

            <!--
               Groovy
            -->
            <!-- Mandatory plugins for using Spock -->
            <plugin>
                <groupId>org.codehaus.gmaven</groupId>
                <artifactId>gmaven-plugin</artifactId>
                <version>${version.maven.gmaven.plugin}</version>
                <configuration>
                    <source>src/test/groovy</source>
                    <providerSelection>2.0</providerSelection>
                </configuration>
                <executions>
                    <execution>
                        <goals>
                            <goal>generateStubs</goal>
                            <goal>compile</goal>
                            <goal>generateTestStubs</goal>
                            <goal>testCompile</goal>
                        </goals>
                    </execution>
                </executions>
                <dependencies>
                    <dependency>
                        <groupId>org.codehaus.gmaven.runtime</groupId>
                        <artifactId>gmaven-runtime-2.0</artifactId>
                        <version>${version.gmaven.runtime}</version>
                        <exclusions>
                            <exclusion>
                                <groupId>org.codehaus.groovy</groupId>
                                <artifactId>groovy-all</artifactId>
                            </exclusion>
                        </exclusions>
                    </dependency>
                    <dependency>
                        <groupId>org.codehaus.groovy</groupId>
                        <artifactId>groovy-all</artifactId>
                        <version>${version.groovy}</version>
                    </dependency>
                </dependencies>
            </plugin>
            <!--<plugin>-->
            <!--<groupId>org.codehaus.gmaven</groupId>-->
            <!--<artifactId>gmaven-plugin</artifactId>-->
            <!--<version>${version.maven.gmaven.plugin}</version>-->
            <!--<configuration>-->
            <!--<source>src / main / groovy</source>-->
            <!--<providerSelection>2.0</providerSelection>-->
            <!--</configuration>-->
            <!--<executions>-->
            <!--<execution>-->
            <!--<goals>-->
            <!--<goal>generateStubs</goal>-->
            <!--<goal>compile</goal>-->
            <!--<goal>generateTestStubs</goal>-->
            <!--<goal>testCompile</goal>-->
            <!--</goals>-->
            <!--</execution>-->
            <!--</executions>-->
            <!--<dependencies>-->
            <!--<dependency>-->
            <!--<groupId>org.codehaus.gmaven.runtime</groupId>-->
            <!--<artifactId>gmaven-runtime-2.0</artifactId>-->
            <!--<version>${version.gmaven.runtime}</version>-->
            <!--<exclusions>-->
            <!--<exclusion>-->
            <!--<groupId>org.codehaus.groovy</groupId>-->
            <!--<artifactId>groovy-all</artifactId>-->
            <!--</exclusion>-->
            <!--</exclusions>-->
            <!--</dependency>-->
            <!--<dependency>-->
            <!--<groupId>org.codehaus.groovy</groupId>-->
            <!--<artifactId>groovy-all</artifactId>-->
            <!--<version>${version.groovy}</version>-->
            <!--</dependency>-->
            <!--</dependencies>-->
            <!--</plugin>-->

            <!-- Only required if default Surefire configuration is not satisfactory -->
            <plugin>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.6</version>
                <configuration>
                    <useFile>false</useFile>
                    <testNGArtifactName>org.testng:testng</testNGArtifactName>
                    <junitArtifactName>none:none</junitArtifactName>
                    <excludes>
                        <exclude>**/*Spec.java</exclude>
                    </excludes>
                </configuration>
                <executions>
                    <!-- Добавлен отдельный execution для совместного использования junit и testng -->
                    <execution>
                        <id>test-spockframework</id>
                        <phase>test</phase>
                        <goals>
                            <goal>test</goal>
                        </goals>
                        <configuration>
                            <useFile>false</useFile>
                            <junitArtifactName>junit:junit</junitArtifactName>
                            <testNGArtifactName>none:none</testNGArtifactName>
                            <includes>
                                <include>**/*Spec.groovy</include>
                            </includes>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <plugin>
                <artifactId>maven-resources-plugin</artifactId>
                <version>${version.maven.plugin.resources}</version>
                <configuration>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
                <executions>
                    <execution>
                        <id>make-assembly</id>
                        <!-- this is used for inheritance merges -->
                        <phase>package</phase>
                        <!-- append to the packaging phase. -->
                    </execution>
                </executions>
            </plugin>

            <!-- генерация jar с исходниками для репозитория -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <version>${version.maven.plugin.source}</version>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <goals>
                            <goal>jar</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>


            <!-- checkstyle -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-checkstyle-plugin</artifactId>
                <version>${version.maven.plugin.checkstyle}</version>
                <configuration>
                    <consoleOutput>true</consoleOutput>
                    <encoding>${project.build.sourceEncoding}</encoding>
                    <configLocation>server/checkstyle/checkstyle-micro.xml</configLocation>
                    <detail>true</detail>
                    <includes>

                    </includes>
                    <excludes>
                        org/hl7/v3/*,
                        misexchange/*,
                        ru\korus\tmis\auxiliary\*,
                        ru\korus\tmis\core\entity\,
                        ru\korus\tmis\lis\,
                        ru\korus\tmis\core\exception\,
                        ru\korus\tmis\util\,
                        ru\korus\tmis\core\database\,
                        ru\korus\tmis\core\patient\,
                        ru\korus\tmis\core\auth\,
                        ru\korus\tmis\drugstore\data\,
                        ru/korus/tmis/communication/thriftgen/,
                        *.xml,
                        ru/korus/tmis/laboratory/*,
                        ru/korus/tmis/laboratory/data/lis2/accept/*,
                        ru/korus/tmis/laboratory/data/lis/accept/*,
                        ru/korus/tmis/laboratory/data/lis/mock/,
                        ru/korus/tmis/ws/webmis/rest/,
                        ru/korus/tmis/ws/medipad/,
                        ru/korus/tmis/ws/transfusion/efive/,
                        ru/korus/tmis/communication/,
                        ru/korus/tmis/entity/,
                        wsdl/,
                        ru/korus/tmis/hs/,
                        ru/korus/tmis/dao/,
                        nsi/
                    </excludes>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>check</goal>
                        </goals>
                    </execution>
                </executions>

            </plugin>

            <!--&lt;!&ndash; Checkstyle для классов на Scala &ndash;&gt;-->
            <!--<plugin>-->
            <!--<groupId>org.scalastyle</groupId>-->
            <!--<artifactId>scalastyle-maven-plugin</artifactId>-->
            <!--<version>0.2.0</version>-->
            <!--<configuration>-->
            <!--<verbose>false</verbose>-->
            <!--<failOnViolation>true</failOnViolation>-->
            <!--<includeTestSourceDirectory>true</includeTestSourceDirectory>-->
            <!--<failOnWarning>false</failOnWarning>-->
            <!--<sourceDirectory>src/main/scala</sourceDirectory>-->
            <!--<testSourceDirectory>src/test/scala</testSourceDirectory>-->
            <!--<configLocation>${basedir}/server/checkstyle/scalastyle_config.xml</configLocation>-->
            <!--</configuration>-->
            <!--&lt;!&ndash;<executions>&ndash;&gt;-->
            <!--&lt;!&ndash;<execution>&ndash;&gt;-->
            <!--&lt;!&ndash;<phase>package</phase>&ndash;&gt;-->
            <!--&lt;!&ndash;<goals>&ndash;&gt;-->
            <!--&lt;!&ndash;<goal>check</goal>&ndash;&gt;-->
            <!--&lt;!&ndash;</goals>&ndash;&gt;-->
            <!--&lt;!&ndash;</execution>&ndash;&gt;-->
            <!--&lt;!&ndash;</executions>&ndash;&gt;-->
            <!--</plugin>-->

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>${version.maven.plugin.pmd}</version>
                <configuration>
                    <targetJdk>${project.build.jdk}</targetJdk>
                    <verbose>true</verbose>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <version>${version.maven.plugin.dependency}</version>
            </plugin>

            <!--
                Glassfish Maven support
            -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <version>1.0-alpha-2</version>
                <executions>
                    <execution>
                        <phase>initialize</phase>
                        <goals>
                            <goal>read-project-properties</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <files>
                        <file>${basedir}/gf.properties</file>
                    </files>
                    <outputFile>
                        <file>${basedir}/gfout.properties</file>
                    </outputFile>
                    <properties>

                    </properties>
                    <quiet>true</quiet>
                </configuration>
            </plugin>


            <!--<plugin>-->
            <!--<groupId>org.glassfish</groupId>-->
            <!--<artifactId>maven-embedded-glassfish-plugin</artifactId>-->
            <!--<version>${version.maven.plugin.embedded.glassfish}</version>-->
            <!--<configuration>-->
            <!--<app>${project.build.directory}/${project.build.finalName}.ear</app>-->
            <!--<port>8080</port>-->
            <!--<contextRoot>${project.build.finalName}</contextRoot>-->
            <!--<name>${project.build.finalName}</name>-->
            <!--</configuration>-->
            <!--</plugin>-->


            <!--  <plugin>
                <groupId>org.glassfish.maven.plugin</groupId>
                <artifactId>maven-glassfish-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <glassfishDirectory>${glassfish.home}</glassfishDirectory>

                    <user>${<profiles>
                        <profile>
                            <id>misCore</id>
                            <properties>
                                <my.build.directory>
                                    /Users/rednekis/Documents/work/projects/misCore/build/${project.groupId}-${project.artifactId}
                                </my.build.directory>
                                <glassfish.home>/usr/local/glassfish3</glassfish.home>
                                <glassfish.domain.name>testdomain</glassfish.domain.name>
                                <glassfish.domain.adminPort>4848</glassfish.domain.adminPort>
                                <glassfish.domain.httpPort>8080</glassfish.domain.httpPort>
                                <glassfish.domain.httpsPort>8443</glassfish.domain.httpsPort>
                                <glassfish.domain.iiopPort>3700</glassfish.domain.iiopPort>
                                <glassfish.domain.jmsPort>7676</glassfish.domain.jmsPort>
                                <glassfish.domain.host>localhost</glassfish.domain.host>
                                <glassfish.domain.user>admin</glassfish.domain.user>
                                <glassfish.domain.password>adminpassword</glassfish.domain.password>
                                <glassfish.domain.passwordFile>${domain.dir}/${domain.name}/master-password
                                </glassfish.domain.passwordFile>
                            </properties>
                        </profile>
                    </profiles>
                        <activeProfiles>
                            <activeProfile>misCore</activeProfile>
                        </activeProfiles>${glassfish.domain.user}</user>
                    <passwordFile>${domain.passwordFile}</passwordFile>

                    <debug>true</debug>
                    <echo>true</echo>
                    <terse>true</terse>

                    <domainDirectory>${domain.dir}</domainDirectory>
                    <autoCreate>false</autoCreate>
                    <skip>false</skip>
                    <domain>
                        <host>${glassfish.domain.host}</host>
                        <name>${glassfish.domain.name}</name>
                        <adminPort>${glassfish.domain.adminPort}</adminPort>
                        <httpPort>${glassfish.domain.httpPort}</httpPort>
                        <httpsPort>${glassfish.domain.httpsPort}</httpsPort>
                        <iiopPort>${glassfish.domain.iiopPort}</iiopPort>
                        <jmsPort>${glassfish.domain.jmsPort}</jmsPort>
                        <reuse>true</reuse>
                    </domain>

                    <components>
                        <component>
                            <name>${project.build.finalName}</name>
                            <artifact>
                                ${project.build.directory}/${project.build.finalName}.${project.packaging}
                            </artifact>
                        </component>
                    </components>
                </configuration>
            </plugin>
                 -->


            <!--
                Release management
            -->
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>${version.maven.plugin.release}</version>
                <configuration>
                    <useReleaseProfile>false</useReleaseProfile>
                    <pushChanges>false</pushChanges>
                </configuration>
                <executions>
                    <execution>
                        <id>default</id>
                        <goals>
                            <goal>perform</goal>
                        </goals>
                        <configuration>
                            <pomFileName>core/pom.xml</pomFileName>
                        </configuration>
                    </execution>
                </executions>
            </plugin>


        </plugins>
    </build>

    <reporting>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>findbugs-maven-plugin</artifactId>
                <version>2.5.2</version>
                <configuration>
                    <findbugsXmlOutput>true</findbugsXmlOutput>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-pmd-plugin</artifactId>
                <version>2.7.1</version>
                <configuration>
                    <targetJdk>${project.build.jdk}</targetJdk>
                    <sourceEncoding>UTF-8</sourceEncoding>
                </configuration>
            </plugin>
        </plugins>
    </reporting>

    <repositories>

        <repository>
            <id>central</id>
            <name>Central Repository</name>
            <url>http://repo.maven.apache.org/maven2</url>
            <layout>default</layout>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
        </repository>

        <repository>
            <id>scala-tools-releases</id>
            <name>Scala-Tools Releases</name>
            <url>http://scala-tools.org/repo-releases</url>
        </repository>

        <!--<repository>-->
        <!--<id>eclipselink</id>-->
        <!--<name>EclipseLink Repo</name>-->
        <!--<url>http://www.eclipse.org/downloads/download.php?r=1&amp;nf=1&amp;file=/rt/eclipselink/maven.repo</url>-->
        <!--</repository>-->

        <repository>
            <id>EclipseLink</id>
            <url>http://download.eclipse.org/rt/eclipselink/maven.repo</url>
        </repository>

        <repository>
            <id>jboss-releases</id>
            <name>JBoss Releases</name>
            <url>
                https://repository.jboss.org/nexus/content/repositories/releases
            </url>
        </repository>

        <repository>
            <id>maven2-repository.dev.java.net</id>
            <name>Java.net Repository for Maven</name>
            <url>http://download.java.net/maven/2/</url>
            <layout>default</layout>
        </repository>

        <repository>
            <id>glassfish</id>
            <name>java.net Glassfish Repo</name>
            <url>http://download.java.net/maven/glassfish</url>
        </repository>

        <repository>
            <id>springsource-repo</id>
            <name>SpringSource Repository</name>
            <url>http://repo.springsource.org/release</url>
        </repository>

        <repository>
            <id>maven-repository.java.net</id>
            <name>Java.net Repository for Maven 1</name>
            <url>http://download.java.net/maven/1/</url>
            <layout>legacy</layout>
        </repository>

        <repository>
            <id>maven2-repository.java.net</id>
            <name>Java.net Repository for Maven 2</name>
            <url>http://download.java.net/maven/2/</url>
        </repository>

    </repositories>

    <pluginRepositories>

        <pluginRepository>
            <id>central</id>
            <name>Central Repository</name>
            <url>http://repo.maven.apache.org/maven2</url>
            <layout>default</layout>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <releases>
                <updatePolicy>never</updatePolicy>
            </releases>
        </pluginRepository>

        <pluginRepository>
            <id>scala-tools.org</id>
            <name>Scala-tools Maven2 Repository</name>
            <url>http://scala-tools.org/repo-releases</url>
        </pluginRepository>

        <pluginRepository>
            <id>java.net-m2</id>
            <name>java.net Repo</name>
            <url>http://download.java.net/maven/2</url>
        </pluginRepository>

        <pluginRepository>
            <id>glassfish</id>
            <name>java.net Glassfish Repo</name>
            <url>http://download.java.net/maven/glassfish</url>
        </pluginRepository>

        <pluginRepository>
            <id>codehaus</id>
            <name>Codehaus Repo</name>
            <url>http://repository.codehaus.org/</url>
        </pluginRepository>

        <pluginRepository>
            <id>javabuilders</id>
            <name>Javabuilders Repo</name>
            <url>http://javabuilders.googlecode.com/svn/repo</url>
        </pluginRepository>

        <pluginRepository>
            <id>sonarsource</id>
            <name>Sonarsource Repo</name>
            <url>http://repository.sonarsource.org/content/groups/public</url>
        </pluginRepository>
    </pluginRepositories>

    <!--
        Release management
    -->
    <!--
    <distributionManagement>
        <repository>
            <id>nexus-tiger</id>
            <url>
                http://tiger.ftk.spbstu.ru:8081/nexus/content/repositories/digitek-releases/
            </url>
        </repository>
        <snapshotRepository>
            <id>nexus-tiger</id>
            <url>
                http://tiger.ftk.spbstu.ru:8081/nexus/content/repositories/digitek-snapshots/
            </url>
        </snapshotRepository>
    </distributionManagement>
    -->

    <scm>
        <connection>scm:git:https://github.com/KorusConsulting/tmis-core.git</connection>
        <developerConnection>scm:git:https://github.com/KorusConsulting/tmis-core.git</developerConnection>
    </scm>

</project>
